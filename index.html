import { useState } from "react";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { motion } from "framer-motion";

import "./globals.css";

export default function BibelEntdeckung() {
  const [quizStep, setQuizStep] = useState(0);
  const [email, setEmail] = useState("");
  const [feedback, setFeedback] = useState("");

  const quiz = [
    {
      frage: "Was ist der erste Satz in der Bibel?",
      antworten: [
        "Im Anfang schuf Gott Himmel und Erde.",
        "Du sollst nicht tÃ¶ten.",
        "Jesus weinte."
      ],
      korrekt: 0
    },
    {
      frage: "Wie viele BÃ¼cher hat das Neue Testament?",
      antworten: ["27", "39", "66"],
      korrekt: 0
    }
  ];

  const nextStep = () => setQuizStep(quizStep + 1);

  return (
    <div className="min-h-screen bg-gradient-to-b from-yellow-100 to-white p-6 font-serif">
      <h1 className="text-4xl font-bold text-center mb-6 font-[Merriweather]">
        Entdecke die Bibel auf eine neue Weise
      </h1>

      <section className="max-w-xl mx-auto">
        {quizStep < quiz.length ? (
          <Card className="mb-6">
            <CardContent>
              <h2 className="text-xl mb-4">{quiz[quizStep].frage}</h2>
              <div className="grid gap-2">
                {quiz[quizStep].antworten.map((antwort, i) => (
                  <Button key={i} onClick={nextStep}>{antwort}</Button>
                ))}
              </div>
            </CardContent>
          </Card>
        ) : (
          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>
            <h2 className="text-2xl mb-4 text-center">
              Du hast das Quiz abgeschlossen! ðŸŽ‰
            </h2>
          </motion.div>
        )}

        <div className="mt-12">
          <h2 className="text-2xl mb-4">Deine Meinung ist uns wichtig</h2>
          <form
            action="https://formspree.io/f/xvgararq"
            method="POST"
            className="grid gap-4"
          >
            <Input
              type="email"
              name="email"
              placeholder="Deine E-Mail"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              required
            />
            <Textarea
              name="message"
              placeholder="Dein Feedback"
              value={feedback}
              onChange={(e) => setFeedback(e.target.value)}
              required
            />
            <Button type="submit">Absenden</Button>
          </form>
        </div>
      </section>

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
      <script>
        {`
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-V66K9SDW9C');
        `}
      </script>
    </div>
  );
}
